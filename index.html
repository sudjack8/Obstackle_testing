<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Firebase Google Sign-In</title>
  </head>
  <body>
    <h2>Firebase Google Sign-In</h2>
    <button id="sign-in">Sign In with Google</button>
    <button id="sign-out" hidden>Sign Out</button>
    <p id="user-info"></p>

    <script type="module">
      // Firebase SDK v9.6.10
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
      import {
        getAuth,
        GoogleAuthProvider,
        signInWithPopup,
        signOut,
        onAuthStateChanged
      } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js";

      // Replace with your Firebase config
      const firebaseConfig = {
      apiKey: "AIzaSyBBLIK0EnQDP4GFRtSGsFJcyyEd06-bEdc",
      authDomain: "obstackle-test.firebaseapp.com",
      databaseURL: "https://obstackle-test-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "obstackle-test",
      storageBucket: "obstackle-test.firebasestorage.app",
      messagingSenderId: "483914204227",
      appId: "1:483914204227:web:1f4c6b314261ba37abc0f6"
};

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const provider = new GoogleAuthProvider();
      

      const signInBtn = document.getElementById("sign-in");
      const signOutBtn = document.getElementById("sign-out");
      const userInfo = document.getElementById("user-info");

      signInBtn.addEventListener("click", async () => {
        try {
          const result = await signInWithRedirect(auth, provider);
          const user = result.user;
          onAuthStateChanged(auth, (user) => {
          if (user) {
           window.location.href = "game.html";
          console.log("Display Name:", user.displayName);
          console.log("Email:", user.email);
          console.log("UID:", user.uid);
          console.log("Photo URL:", user.photoURL);
  }
});
          console.log("Signed in as:", user.displayName);
        } catch (error) {
          console.error("Sign-in error:", error);
        }
      });

      signOutBtn.addEventListener("click", () => {
        signOut(auth);
      });

      onAuthStateChanged(auth, (user) => {
        if (user) {
          userInfo.textContent = `Signed in as: ${user.displayName} (${user.email})`;
          signInBtn.hidden = true;
          signOutBtn.hidden = false;
        } else {
          userInfo.textContent = "Not signed in.";
          signInBtn.hidden = false;
          signOutBtn.hidden = true;
        }
      });
    </script>
  </body>
</html>